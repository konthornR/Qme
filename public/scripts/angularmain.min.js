var app=angular.module("reservationApp",["ja.qr","ngRoute"]);app.config(function(n,t){t.html5Mode(!0)});app.factory("socket",function(){return document.location.hostname=="localhost"?io.connect("http://localhost:3000"):io.connect("https://murmuring-fjord-5701.herokuapp.com/")});app.controller("tableQueueControl",function(n,t,i){n.qrCodeString="TEST";i.search().companyId&&t.emit("join company",{CompanyId:i.search().companyId});n.selectedCustomer={Id:"",Name:"",QueuePosition:0,NumberOfSeats:0};t.on("update table",function(t){n.listCustomersQueue=t;n.$digest()});t.on("update calling table",function(t){n.listCustomersCalling=t;n.$digest()});n.nextQueue=function(n){t.emit("next queue",n)};n.attend=function(n){t.emit("customer attend",n)};n.notAttend=function(n){t.emit("customer does not attend",n)};n.selectCustomer=function(t){n.selectedCustomer=t;n.qrCodeString='{"CompanyId" : "'+i.search().companyId+'", "Id": "'+t.Id+'"}'};n.getNextQueue=function(n){t.emit("request customer in next queue",{customerType:n})};t.on("respond customer in next queue",function(t){n.nextCustomer=t;n.$digest()});n.callThisQueue=function(){n.nextCustomer&&n.nextCustomer.Id&&(t.emit("next queue",n.nextCustomer),n.nextCustomer=undefined)};n.searchCustomerByNameAndNumSeats=function(){n.searchCustomer&&n.searchCustomer.Name&&n.searchCustomer.NumberOfSeats&&t.emit("request customer search by name and id",n.searchCustomer)};t.on("respond customer search by name and id",function(t){n.searchResultCustomers=t;n.$digest()});t.emit("request initial table")});app.controller("reserveQueueControl",function(n,t,i){n.qrCodeString="TEST";i.search().companyId&&t.emit("join company",{CompanyId:i.search().companyId});n.reserveSeats=function(){var f=r();n.customer&&n.customer.Name!=""&&u(n.customer.NumberOfSeats)?(t.emit("request reserve seats",{Name:n.customer.Name,NumberOfSeats:n.customer.NumberOfSeats,Id:f}),n.customer.Name="",n.customer.NumberOfSeats="",n.qrCodeString='{"CompanyId" : "'+i.search().companyId+'", "Id": "'+f+'"}'):alert("Wrong Input Format: Name can not be empty and Number of Seats must be numeric")};var r=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},u=function(n){return n>=0||n<0}});app.controller("createOrJoinCompanyControl",function(n,t,i,r){r.get("/UserAuthentication").success(function(t){t.isAuthenticated&&(n.isAuthenticated=t.isAuthenticated,n.userName=t.user.name)});t.emit("global request initial companies");n.createCompany=function(){n.newCompany&&n.newCompany.Name!=""&&(t.emit("global create company",{CompanyName:n.newCompany.Name}),n.newCompany.Id="")};t.on("global update companies",function(t){n.companies=t;n.$digest()});n.selectReserveQueueCompany=function(n){i.open("/reserveQueue?companyId="+n.companyId)};n.selectQueueListsCompany=function(n){i.open("/queueLists?companyId="+n.companyId)};n.selectNextQueueCompany=function(n){i.open("/callQueue?companyId="+n.companyId)}});app.controller("homePageControl",function(n,t){n.isAuthenticated=!1;n.userName=null;t.get("/UserAuthentication").success(function(t){t.isAuthenticated&&(n.isAuthenticated=t.isAuthenticated,n.userName=t.user.name)})});app.controller("userAndCompanyManagerControl",function(n,t){t.post("/admin/listUser").success(function(t){n.users=t});t.post("/admin/listCompany").success(function(t){n.companies=t});t.post("/admin/listLink").success(function(t){n.linksBetween=t});n.linkUserCompany=function(){n.newLink&&n.newLink.userId&&n.newLink.companyId&&t({method:"POST",url:"/admin/linkUserCompany",data:n.newLink,transformRequest:function(n){var t=[];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(){})}});app.controller("backstoreControl",function(n,t){t.post("/api/getCompaniesByUserId","").then(function(t){n.companies=t.data;n.selectedCompany=t.data[0];calloutChartSet1(n.selectedCompany.id,!1);calloutChartSet2(n.selectedCompany.id,!1)},function(){n.companies=null});n.changeSelectedCompany=function(t){n.selectedCompany=t}});app.directive("companyDropdown",function(){return{restrict:"E",templateUrl:"/partials/company-dropdown"}});
/*
//# sourceMappingURL=angularmain.min.js.map
*/